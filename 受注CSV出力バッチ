<mxfile host="app.diagrams.net" modified="2021-04-30T06:57:44.656Z" agent="5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/90.0.4430.93 Safari/537.36" etag="QJGbJTjlYDNtW7LD-1a2" version="14.6.9" type="github">
  <diagram id="H-cOdyGd7a4VrqNQHK3g" name="Page-1">
    <mxGraphModel dx="657" dy="478" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="KCDJdN_GZAzKVCQ8JBW0-45" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontColor=#333333;" parent="1" vertex="1">
          <mxGeometry x="20" y="200" width="180" height="180" as="geometry" />
        </mxCell>
        <mxCell id="KCDJdN_GZAzKVCQ8JBW0-28" value="" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="240" y="295" width="140" height="100" as="geometry" />
        </mxCell>
        <mxCell id="KCDJdN_GZAzKVCQ8JBW0-4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="KCDJdN_GZAzKVCQ8JBW0-1" target="KCDJdN_GZAzKVCQ8JBW0-2" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KCDJdN_GZAzKVCQ8JBW0-1" value="START" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="62.5" y="20" width="90" height="30" as="geometry" />
        </mxCell>
        <mxCell id="KCDJdN_GZAzKVCQ8JBW0-5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="KCDJdN_GZAzKVCQ8JBW0-2" target="KCDJdN_GZAzKVCQ8JBW0-3" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KCDJdN_GZAzKVCQ8JBW0-2" value="①前処理" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="42.5" y="80" width="130" height="30" as="geometry" />
        </mxCell>
        <mxCell id="KCDJdN_GZAzKVCQ8JBW0-7" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="KCDJdN_GZAzKVCQ8JBW0-3" target="KCDJdN_GZAzKVCQ8JBW0-6" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KCDJdN_GZAzKVCQ8JBW0-3" value="②対象受注取得" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="42.5" y="145" width="130" height="30" as="geometry" />
        </mxCell>
        <mxCell id="KCDJdN_GZAzKVCQ8JBW0-11" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="KCDJdN_GZAzKVCQ8JBW0-6" target="KCDJdN_GZAzKVCQ8JBW0-8" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KCDJdN_GZAzKVCQ8JBW0-6" value="③受注データ追加" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="42.5" y="240" width="130" height="30" as="geometry" />
        </mxCell>
        <mxCell id="KCDJdN_GZAzKVCQ8JBW0-13" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="KCDJdN_GZAzKVCQ8JBW0-8" target="KCDJdN_GZAzKVCQ8JBW0-12" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KCDJdN_GZAzKVCQ8JBW0-23" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;" parent="1" source="KCDJdN_GZAzKVCQ8JBW0-6" target="KCDJdN_GZAzKVCQ8JBW0-22" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KCDJdN_GZAzKVCQ8JBW0-38" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="KCDJdN_GZAzKVCQ8JBW0-8" target="KCDJdN_GZAzKVCQ8JBW0-25" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KCDJdN_GZAzKVCQ8JBW0-8" value="④受注レコード出力" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="42.5" y="330" width="130" height="30" as="geometry" />
        </mxCell>
        <mxCell id="KCDJdN_GZAzKVCQ8JBW0-15" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="KCDJdN_GZAzKVCQ8JBW0-12" target="KCDJdN_GZAzKVCQ8JBW0-14" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KCDJdN_GZAzKVCQ8JBW0-12" value="⑤CSVをdataへ送信" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="42.5" y="415" width="130" height="30" as="geometry" />
        </mxCell>
        <mxCell id="KCDJdN_GZAzKVCQ8JBW0-17" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="KCDJdN_GZAzKVCQ8JBW0-14" target="KCDJdN_GZAzKVCQ8JBW0-16" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KCDJdN_GZAzKVCQ8JBW0-14" value="⑥CSVをbackupへ送信" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="42.5" y="510" width="130" height="30" as="geometry" />
        </mxCell>
        <mxCell id="KCDJdN_GZAzKVCQ8JBW0-19" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="KCDJdN_GZAzKVCQ8JBW0-16" target="KCDJdN_GZAzKVCQ8JBW0-18" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KCDJdN_GZAzKVCQ8JBW0-16" value="⑦後処理" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="42.5" y="605" width="130" height="30" as="geometry" />
        </mxCell>
        <mxCell id="KCDJdN_GZAzKVCQ8JBW0-18" value="END" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="62.5" y="680" width="90" height="30" as="geometry" />
        </mxCell>
        <mxCell id="KCDJdN_GZAzKVCQ8JBW0-21" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;exitPerimeter=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="KCDJdN_GZAzKVCQ8JBW0-20" target="KCDJdN_GZAzKVCQ8JBW0-3" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KCDJdN_GZAzKVCQ8JBW0-20" value="受注系" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="250" y="130" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="KCDJdN_GZAzKVCQ8JBW0-22" value="受注データ出力" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="250" y="225" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="KCDJdN_GZAzKVCQ8JBW0-39" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="KCDJdN_GZAzKVCQ8JBW0-25" target="KCDJdN_GZAzKVCQ8JBW0-31" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="400" y="470" as="targetPoint" />
            <Array as="points">
              <mxPoint x="400" y="345" />
              <mxPoint x="400" y="460" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="KCDJdN_GZAzKVCQ8JBW0-40" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="KCDJdN_GZAzKVCQ8JBW0-25" target="KCDJdN_GZAzKVCQ8JBW0-34" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="420" y="335" />
              <mxPoint x="420" y="580" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="KCDJdN_GZAzKVCQ8JBW0-25" value="受注CSV" style="shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;fixedSize=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="260" y="322.5" width="100" height="45" as="geometry" />
        </mxCell>
        <mxCell id="KCDJdN_GZAzKVCQ8JBW0-29" value="tmp" style="rounded=0;whiteSpace=wrap;html=1;fontStyle=1;" parent="1" vertex="1">
          <mxGeometry x="240" y="295" width="70" height="20" as="geometry" />
        </mxCell>
        <mxCell id="KCDJdN_GZAzKVCQ8JBW0-30" value="作業" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="240" y="420" width="70" height="20" as="geometry" />
        </mxCell>
        <mxCell id="KCDJdN_GZAzKVCQ8JBW0-31" value="" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="240" y="410" width="140" height="100" as="geometry" />
        </mxCell>
        <mxCell id="KCDJdN_GZAzKVCQ8JBW0-32" value="受注CSV" style="shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;fixedSize=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="260" y="437.5" width="100" height="45" as="geometry" />
        </mxCell>
        <mxCell id="KCDJdN_GZAzKVCQ8JBW0-33" value="作業" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="240" y="540" width="70" height="20" as="geometry" />
        </mxCell>
        <mxCell id="KCDJdN_GZAzKVCQ8JBW0-34" value="" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="240" y="530" width="140" height="100" as="geometry" />
        </mxCell>
        <mxCell id="KCDJdN_GZAzKVCQ8JBW0-35" value="受注CSV" style="shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;fixedSize=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="260" y="557.5" width="100" height="45" as="geometry" />
        </mxCell>
        <mxCell id="KCDJdN_GZAzKVCQ8JBW0-36" value="data" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="240" y="410" width="70" height="20" as="geometry" />
        </mxCell>
        <mxCell id="KCDJdN_GZAzKVCQ8JBW0-37" value="backup" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="240" y="530" width="70" height="20" as="geometry" />
        </mxCell>
        <mxCell id="KCDJdN_GZAzKVCQ8JBW0-43" value="" style="endArrow=none;dashed=1;html=1;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="480" y="710" as="sourcePoint" />
            <mxPoint x="480" y="40" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="KCDJdN_GZAzKVCQ8JBW0-44" value="&lt;font style=&quot;font-size: 14px&quot;&gt;①前処理&lt;br&gt;　tmpのファイル削除。&lt;br&gt;&lt;br&gt;②対象受注取得&lt;br&gt;　対象となる受注データを取得する。&lt;br&gt;　【対象】&lt;br&gt;　・設定ファイル日時〜現在日時 -2分&lt;br&gt;　・受注状態：商品準備中&lt;br&gt;　・未キャンセル&lt;br&gt;　・未保留&lt;br&gt;&lt;br&gt;受注データ出力テーブルに存在しない&lt;br&gt;　対象となる受注データが存在しない場合、空ファイルを作成する。&lt;br&gt;&lt;br&gt;③受注データ追加&lt;br&gt;　受注データ出力テーブルの追加。&lt;br&gt;&lt;br&gt;④受注レコード出力&lt;br&gt;　受注CSVレコードを生成し、tmpに出力する。&lt;br&gt;&lt;br&gt;⑤CSVをdataへ送信&lt;br&gt;　tmpに出力した受注CSVをdataへ送信する。&lt;br&gt;&lt;br&gt;⑥CSVをbackupへ送信&lt;br&gt;　tmpに出力した受注CSVをbackupへ送信する。&lt;br&gt;&lt;br&gt;⑦後処理&lt;br&gt;　tmpのファイルを削除。&lt;br&gt;　正常/異常メール送信。&lt;br&gt;　【正常メール情報】&lt;br&gt;　・処理件数&lt;br&gt;　・ファイル名&lt;br&gt;&lt;br&gt;異常終了時の挙動&lt;br&gt;　全件ロールバック、異常メール送信&lt;br&gt;　【考えられるケース】&lt;br&gt;　　・tmp、data、backupフォルダが存在しない&lt;br&gt;　　・テーブルがロックされている&lt;br&gt;&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="500" y="40" width="320" height="680" as="geometry" />
        </mxCell>
        <mxCell id="KCDJdN_GZAzKVCQ8JBW0-46" value="ループ" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;fontColor=#333333;" parent="1" vertex="1">
          <mxGeometry x="20" y="200" width="70" height="20" as="geometry" />
        </mxCell>
        <mxCell id="KCDJdN_GZAzKVCQ8JBW0-48" value="5" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" parent="1" vertex="1">
          <mxGeometry x="390" y="390" width="20" height="20" as="geometry" />
        </mxCell>
        <mxCell id="KCDJdN_GZAzKVCQ8JBW0-53" value="6" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" parent="1" vertex="1">
          <mxGeometry x="411" y="438" width="20" height="20" as="geometry" />
        </mxCell>
        <mxCell id="KCDJdN_GZAzKVCQ8JBW0-56" value="&lt;font style=&quot;font-size: 14px&quot;&gt;制約事項&lt;br&gt;・管理画面の実装は対象外とする。（レポート機能、手動起動なし）&lt;br&gt;・ログ出力 及び 共通化は、優先度低で対応する。（工数の関係）&lt;br&gt;・ファイル出力は、共通サーバとする。（外部出力しない）&lt;br&gt;&lt;br&gt;懸念点&lt;br&gt;・ローカルフォルダ作成&lt;br&gt;・ステージフォルダ作成&lt;br&gt;&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="42.5" y="760" width="737.5" height="200" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
